(function(e,t,n){"use strict";var o={html:'<!DOCTYPE html><html><head><style>.ie * {min-height: auto !important}</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true"></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" value="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" value="http://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'},i=function(t,n,i){var r=o[t];return e.each(n,function(e,t){r=r.replace(RegExp("\\{"+e+"\\}","g"),t)}),i&&(r=e(r)),r};e.sceditor=function(o,r){var s,a,l,c,d,u,p,f,h,m,g,b,v,y,x,w,C,k,E,B,S,T,D,I,M,P,H,R,z,N,A,O,L,_,W,F,j,q,V,Q,U,$,Y,X,K,G=this,J=o.get?o.get(0):o,Z=e(J),et=[],tt=[],nt=[],ot=[];G.commands=e.extend(!0,{},r.commands||e.sceditor.commands),C=function(){if(Z.data("sceditor",G),G.opts=e.extend({},e.sceditor.defaultOptions,r),G.opts.locale&&"en"!==G.opts.locale&&D(),s=e('<div class="sceditor-container" />').insertAfter(Z),null!==G.opts.zIndex&&s.css("z-index",G.opts.zIndex),e.sceditor.ie&&s.addClass("ie").addClass("ie"+e.sceditor.ie),w=!!Z.attr("required"),Z.removeAttr("required"),T(),I(),S(),H(),M(),P(),G.opts.autofocus&&K(),e.sceditor.isWysiwygSupported||G.toggleSourceMode(),z(),G.opts.autoExpand)var t=setInterval(function(){n.readyState&&"complete"!==n.readyState||(G.expandToContent(),clearInterval(t))},10);Q(),b.call("ready")},T=function(){var t=G.opts.plugins;t=t?(""+t).split(","):[],b=new e.sceditor.PluginManager(G),e.each(t,function(t,n){b.register(e.trim(n))})},D=function(){var t;e.sceditor.locale[G.opts.locale]?h=e.sceditor.locale[G.opts.locale]:(t=G.opts.locale.split("-"),e.sceditor.locale[t[0]]&&(h=e.sceditor.locale[t[0]])),h&&h.dateFormat&&(G.opts.dateFormat=h.dateFormat)},S=function(){var n,o,r,a;d=e("<textarea></textarea>").hide(),l=e('<iframe frameborder="0"></iframe>'),"https:"===t.location.protocol&&l.attr("src","javascript:false"),s.append(l).append(d),c=l[0],u=d[0],G.width(G.opts.width||Z.width()),G.height(G.opts.height||Z.height()),o=N(),r=e(o),o.open(),o.write(i("html",{charset:G.opts.charset,style:G.opts.style})),o.close(),G.readOnly(!!G.opts.readOnly),n=r.find("body"),e.sceditor.ie&&r.find("html").addClass("ie").addClass("ie"+e.sceditor.ie),(/iPhone|iPod|iPad| wosbrowser\//i.test(navigator.userAgent)||e.sceditor.ie)&&n.height("100%"),m=new e.sceditor.rangeHelper(c.contentWindow),G.val(Z.hide().val()),(a=Z.attr("tabindex"))!==void 0&&(d.attr("tabindex",a),l.attr("tabindex",a))},M=function(){var t=e(N()),n=t.find("body");G.opts.autoUpdate&&(n.bind("blur",G.updateOriginal),d.bind("blur",G.updateOriginal)),G.opts.rtl&&(n.attr("dir","rtl"),d.attr("dir","rtl")),G.opts.autoExpand&&t.bind("keyup",G.expandToContent),G.opts.resizeEnabled&&R(),G.opts.id&&s.attr("id",G.opts.id)},P=function(){var o=G.opts.height,i=G.opts.width,r=e(N());e(n).click(j),e(J.form).bind("reset",_).submit(G.updateOriginal),(o&&(o+"").indexOf("%")>-1||i&&(i+"").indexOf("%")>-1)&&e(t).resize(q),r.find("body").keypress(L).keyup($).bind("paste",A).bind("keyup focus blur contextmenu mouseup click",Y).bind("keydown keyup keypress focus blur contextmenu",F),d.bind("keydown keyup keypress focus blur contextmenu",F),r.keypress(L).mousedown(W).bind("focus blur contextmenu mouseup click",Y).bind("beforedeactivate keyup",B).keyup($).focus(function(){f=null}),s.bind("selectionchanged",Q).bind("selectionchanged",X).bind("selectionchanged",F).bind("nodechanged",F)},I=function(){var t,n,o,r,l,c,d=G.opts.toolbar.split("|");for(c=function(){var t=e(this);return t.hasClass("disabled")||E(t,G.commands[t.data("sceditor-command")]),Q(),!1},a=e('<div class="sceditor-toolbar" unselectable="on" />'),r=0;d.length>r;r++){for(t=e('<div class="sceditor-group" />'),o=d[r].split(","),l=0;o.length>l;l++)G.commands[o[l]]&&(n=i("toolbarButton",{name:o[l],dispName:G.commands[o[l]].tooltip||o[l]},!0).click(c).data("sceditor-txtmode",!!G.commands[o[l]].txtExec).data("sceditor-wysiwygmode",!!G.commands[o[l]].exec),G.commands[o[l]].tooltip&&n.attr("title",G._(G.commands[o[l]].tooltip)),G.commands[o[l]].exec||n.addClass("disabled"),t.append(n));a.append(t)}G.opts.toolbarContainer?e(G.opts.toolbarContainer).append(a):s.append(a)},H=function(){e.each(G.commands,function(t,n){n.keyPress&&et.push(n.keyPress),n.forceNewLineAfter&&e.isArray(n.forceNewLineAfter)&&(nt=e.merge(nt,n.forceNewLineAfter)),n.state?ot.push({name:t,state:n.state}):"string"==typeof n.exec&&ot.push({name:t,state:n.exec})})},R=function(){var t,o,i,r,a,l,c=e('<div class="sceditor-grip" />'),d=e('<div class="sceditor-resize-cover" />'),u=0,p=0,f=0,h=0,m=s.width(),g=s.height(),b=!1;t=G.opts.resizeMinHeight||g/1.5,o=G.opts.resizeMaxHeight||2.5*g,i=G.opts.resizeMinWidth||m/1.25,r=G.opts.resizeMaxWidth||1.25*m,a=function(e){var n=h+(e.pageY-p),s=f+(e.pageX-u);r>0&&s>r&&(s=r),o>0&&n>o&&(n=o),G.opts.resizeWidth&&s>=i&&(0>r||r>=s)&&G.width(s),G.opts.resizeHeight&&n>=t&&(0>o||o>=n)&&G.height(n),e.preventDefault()},l=function(t){b&&(b=!1,d.hide(),s.removeClass("resizing"),e(n).unbind("mousemove",a),e(n).unbind("mouseup",l),t.preventDefault())},s.append(c),s.append(d.hide()),c.mousedown(function(t){u=t.pageX,p=t.pageY,f=s.width(),h=s.height(),b=!0,s.addClass("resizing"),d.show(),e(n).mousemove(a),e(n).mouseup(l),t.preventDefault()})},z=function(){if(!(0>G.opts.toolbar.indexOf("emoticon"))){G.opts.emoticonsRoot&&G.opts.emoticons&&e.each(G.opts.emoticons,function(t,n){e.each(n,function(e,n){G.opts.emoticons[t][e]=G.opts.emoticonsRoot+(n.url||n)})});var t,o=e.extend({},G.opts.emoticons.more,G.opts.emoticons.dropdown,G.opts.emoticons.hidden);e.each(o,function(e,o){t=n.createElement("img"),t.src=o.url||o,tt.push(t)})}},K=function(){var e,t=c.contentWindow.document,n=t.body;return t.createRange?(n.firstChild&&(e=t.createRange(),e.setStart(n.firstChild,0),e.setEnd(n.firstChild,0),m.selectRange(e),n.focus()),void 0):G.focus()},G.readOnly=function(e){return"boolean"!=typeof e?"readonly"===d.attr("readonly"):(N().body.contentEditable=!e,e?d.attr("readonly","readonly"):d.removeAttr("readonly"),V(e),this)},V=function(t){var n=G.inSourceMode();a.find(".sceditor-button").removeClass("disabled").each(function(){var o=e(this);t===!0||n&&!o.data("sceditor-txtmode")?o.addClass("disabled"):n||o.data("sceditor-wysiwygmode")||o.addClass("disabled")})},G.width=function(e){return e?(G.width()!==e&&(s.width(e),e=s.width(),l.width(e),l.width(e+(e-l.outerWidth(!0))),d.width(e),d.width(e+(e-d.outerWidth(!0)))),this):s.width()},G.height=function(e){return e?(G.height()!==e&&(e-=G.opts.toolbarContainer?0:a.outerHeight(!0),l.height(e),l.height(e+(e-l.outerHeight(!0))),d.height(e),d.height(e+(e-d.outerHeight(!0)))),this):s.height()},G.expandToContent=function(e){var t=N(),n=s.height(),o=t.body.scrollHeight||t.documentElement.scrollHeight,i=n-l.height(),r=G.opts.resizeMaxHeight||2*(G.opts.height||Z.height());o+=i,e!==!0&&o>r&&(o=r),o>n&&G.height(o)},G.destroy=function(){b.destroy(),m=null,f=null,b=null,e(n).unbind("click",j),e(t).unbind("resize",q),e(J.form).unbind("reset",_).unbind("submit",G.updateOriginal),e(N().body).unbind(),e(N()).unbind().find("*").remove(),d.unbind().remove(),s.unbind().find("*").unbind().remove(),s.remove(),Z.removeData("sceditor").removeData("sceditorbbcode").show(),w&&Z.attr("required","required")},G.createDropDown=function(t,n,o,i){G.closeDropDown(),i!==!1&&e(o).find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on");var r={top:t.offset().top,left:t.offset().left,marginTop:t.outerHeight()};e.extend(r,G.opts.dropDownCss),p=e('<div class="sceditor-dropdown sceditor-'+n+'" />').css(r).append(o).appendTo(e("body")).click(function(e){e.stopPropagation()})},j=function(e){3!==e.which&&G.closeDropDown()},A=function(e){function t(e,n){if(e.childNodes.length>0){for(;e.firstChild;)n.appendChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild);O(e,n)}else{if(r>25){for(;a.firstChild;)e.appendChild(a.firstChild);return m.restoreRange(),void 0}++r,setTimeout(function(){t(e,n)},20)}}var o,i=N().body,r=0,s=i.ownerDocument.createElement("div"),a=i.ownerDocument.createDocumentFragment();if(G.opts.disablePasting)return!1;if(G.opts.enablePasteFiltering){if(m.saveRange(),n.body.appendChild(s),e&&e.clipboardData&&e.clipboardData.getData&&((o=e.clipboardData.getData("text/html"))||(o=e.clipboardData.getData("text/plain"))))return s.innerHTML=o,O(i,s),e.stopPropagation(),e.preventDefault(),!1;for(;i.firstChild;)a.appendChild(i.firstChild);return t(i,s),G.focus(),!0}},O=function(t,n){e.sceditor.dom.fixNesting(n);var o=n.innerHTML;b.hasHandler("toSource")&&(o=b.callOnlyFirst("toSource",o,e(n))),n.parentNode.removeChild(n),b.hasHandler("toWysiwyg")&&(o=b.callOnlyFirst("toWysiwyg",o,!0)),m.restoreRange(),m.insertHTML(o)},G.closeDropDown=function(e){p&&(p.unbind().remove(),p=null),e===!0&&G.focus()},N=function(){return c.contentDocument?c.contentDocument:c.contentWindow&&c.contentWindow.document?c.contentWindow.document:c.document?c.document:null},G.wysiwygEditorInsertHtml=function(t,n,o){G.focus(),(o||!e(m.parentNode()).is("code")&&0===e(m.parentNode()).parents("code").length)&&(m.insertHTML(t,n),$())},G.wysiwygEditorInsertText=function(t,n){G.wysiwygEditorInsertHtml(e.sceditor.escapeEntities(t),e.sceditor.escapeEntities(n))},G.insertText=function(e,t){return G.inSourceMode()?G.sourceEditorInsertText(e,t):G.wysiwygEditorInsertText(e,t),this},G.sourceEditorInsertText=function(e,t){var o,i,r,s,a;a=u.scrollTop,u.focus(),u.selectionStart!==void 0?(i=u.selectionStart,r=u.selectionEnd,s=e.length,t&&(e+=u.value.substring(i,r)+t),u.value=u.value.substring(0,i)+e+u.value.substring(r,u.value.length),u.selectionStart=i+e.length-(t?t.length:0),u.selectionEnd=u.selectionStart):n.selection.createRange!==void 0?(o=n.selection.createRange(),t&&(e+=o.text+t),o.text=e,t&&o.moveEnd("character",0-t.length),o.moveStart("character",o.End-o.Start),o.select()):u.value+=e+t,u.scrollTop=a,u.focus()},G.getRangeHelper=function(){return m},G.val=function(e,t){return"string"==typeof e?(G.inSourceMode()?G.setSourceEditorValue(e):(t!==!1&&b.hasHandler("toWysiwyg")&&(e=b.callOnlyFirst("toWysiwyg",e)),G.setWysiwygEditorValue(e)),this):G.inSourceMode()?G.getSourceEditorValue(!1):G.getWysiwygEditorValue()},G.insert=function(t,n,o,i){if(G.inSourceMode())G.sourceEditorInsertText(t,n);else{if(n){var r=G.getRangeHelper().selectedHtml(),s=e("<div>").appendTo(e("body")).hide().html(r);o!==!1&&(b.hasHandler("toSource")&&(r=b.callOnlyFirst("toSource",r,s)),s.remove()),t+=r+n}b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t,!0)),i!==!1&&(t=k(t)),G.wysiwygEditorInsertHtml(t)}return this},G.getWysiwygEditorValue=function(t){var n,o=l.contents().find("body");return e.sceditor.ie&&G.focus(),m.saveRange(),e.sceditor.dom.fixNesting(o.get(0)),n=o.html(),t!==!1&&b.hasHandler("toSource")&&(n=b.callOnlyFirst("toSource",n,o)),m.restoreRange(),f=null,n},G.getSourceEditorValue=function(e){var t=d.val();return e!==!1&&b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t)),t},G.setWysiwygEditorValue=function(t){t||(t="<p>"+(e.sceditor.ie?"":"<br />")+"</p>"),N().body.innerHTML=k(t),$()},G.setSourceEditorValue=function(e){d.val(e)},G.updateOriginal=function(){Z.val(G.val())},k=function(t){if(-1===G.opts.toolbar.indexOf("emoticon"))return t;var n=e.extend({},G.opts.emoticons.more,G.opts.emoticons.dropdown,G.opts.emoticons.hidden);return e.each(n,function(n,o){var r=e.sceditor.regexEscape(n)+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))",s="";G.opts.emoticonsCompat&&(r="((>|^|\\s| | | | |&nbsp;))"+r+"(?=(\\s|$|<| | | | |&nbsp;))",s="$1"),t=t.replace(RegExp(r,"gm"),s+i("emoticon",{key:n,url:o.url||o,tooltip:o.tooltip||n}))}),t},G.inSourceMode=function(){return s.hasClass("sourceMode")},G.sourceMode=function(e){return"boolean"!=typeof e?G.inSourceMode():((G.inSourceMode()&&!e||!G.inSourceMode()&&e)&&G.toggleSourceMode(),this)},G.toggleSourceMode=function(){(e.sceditor.isWysiwygSupported||!G.inSourceMode())&&(G.inSourceMode()?G.setWysiwygEditorValue(G.getSourceEditorValue()):G.setSourceEditorValue(G.getWysiwygEditorValue()),f=null,d.toggle(),l.toggle(),G.inSourceMode()?s.removeClass("sourceMode").addClass("wysiwygMode"):s.removeClass("wysiwygMode").addClass("sourceMode"),V(),Q())},U=function(){return u.focus(),null!=u.selectionStart?u.value.substring(u.selectionStart,u.selectionEnd):n.selection.createRange?n.selection.createRange().text:void 0},E=function(t,n){return G.inSourceMode()?(n.txtExec&&(e.isArray(n.txtExec)?G.sourceEditorInsertText.apply(G,n.txtExec):n.txtExec.call(G,t,U())),void 0):(n.exec&&(e.isFunction(n.exec)?n.exec.call(G,t):G.execCommand(n.exec,n.hasOwnProperty("execParam")?n.execParam:null)),void 0)},B=function(){e.sceditor.ie&&(f=m.selectedRange())},G.execCommand=function(t,n){var o=!1,i=e(m.parentNode());if(G.focus(),!i.is("code")&&0===i.parents("code").length){if(N())try{o=N().execCommand(t,!1,n)}catch(r){}!o&&G.commands[t]&&G.commands[t].errorMessage&&alert(G._(G.commands[t].errorMessage))}},Y=function(){x||(x=!0,setTimeout(function(){m.compare(y)||(y=m.cloneSelected(),s.trigger(e.Event("selectionchanged"))),x=!1},100))},X=function(){var t=m.parentNode();v!==t&&(s.trigger(e.Event("nodechanged",{oldNode:v,newNode:t})),v=t)},G.currentNode=function(){return v},Q=function(e){var t,n,o,i,r,s=N(),l=ot.length,c=G.sourceMode();if(G.sourceMode()||G.readOnly())a.find(".sceditor-button").removeClass("active");else for(r=e?e.newNode:m.parentNode(),o=m.getFirstBlockParent(r);l--;)if(t=0,n=ot[l],i=a.find(".sceditor-button-"+n.name),c&&!i.data("sceditor-txtmode"))i.addClass("disabled");else if(c||i.data("sceditor-wysiwygmode")){if("string"==typeof n.state)try{t=s.queryCommandEnabled(n.state)?0:-1,t>-1&&(t=s.queryCommandState(n.state)?1:0)}catch(e){}else t=n.state.call(G,r,o);0>t?i.addClass("disabled"):i.removeClass("disabled"),t>0?i.addClass("active"):i.removeClass("active")}else i.addClass("disabled")},L=function(t){var n,o=et.length;if(G.closeDropDown(),n=e(m.parentNode()),13===t.which&&(n.is("code,blockquote,pre")||0!==n.parents("code,blockquote,pre").length))return f=null,G.wysiwygEditorInsertHtml("<br />",null,!0),!1;if(!n.is("code")&&0===n.parents("code").length)for(;o--;)et[o].call(G,t,c,d)},$=function(){var t,n,o=N();e.sceditor.dom.rTraverse(o.body,function(i){return t=i.nodeName.toLowerCase(),e.inArray(t,nt)>-1&&(n=!0),3===i.nodeType&&!/^\s*$/.test(i.nodeValue)||"br"===i.nodeName.toLowerCase()||e.sceditor.ie&&!i.firstChild&&!e.sceditor.dom.isInline(i,!1)?(n&&e(o.body).append(e("<div>"+(e.sceditor.ie?"":"<br />")+"</div>\n")),!1):void 0})},_=function(){G.val(Z.val())},W=function(){G.closeDropDown(),f=null},q=function(){G.opts.height&&(""+G.opts.height).indexOf("%")>-1&&G.height(s.parent().height()*(parseFloat(G.opts.height)/100)),G.opts.width&&(""+G.opts.width).indexOf("%")>-1&&G.width(s.parent().width()*(parseFloat(G.opts.width)/100))},G._=function(){var e=arguments;return h&&h[e[0]]&&(e[0]=h[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return e[n-0+1]!==void 0?e[n-0+1]:"{"+n+"}"})},F=function(t){var n,o=e.extend({},t);b.call(o.type+"Event",t,G),delete o.type,n=e.Event((t.target===u?"scesrc":"scewys")+t.type,o),s.trigger.apply(s,[n,G]),n.isDefaultPrevented()&&t.preventDefault(),n.isImmediatePropagationStopped()&&n.stopImmediatePropagation(),n.isPropagationStopped()&&n.stopPropagation()},G.bind=function(t,n,o,i){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(o||s.bind("scewys"+t[r],n),i||s.bind("scesrc"+t[r],n));return this},G.unbind=function(t,n,o,i){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(o||s.unbind("scewys"+t[r],n),i||s.unbind("scesrc"+t[r],n));return this},G.blur=function(t,n,o){return e.isFunction(t)?G.bind("blur",t,n,o):G.sourceMode()?d.blur():(g||(g=e('<input style="width:0;height:0;opacity:0;border:0;padding:0;filter:alpha(opacity=0)" type="text" />').appendTo(s)),g.removeAttr("disabled").show().focus().blur().hide().attr("disabled","disabled")),this},G.focus=function(t,n,o){return e.isFunction(t)?G.bind("focus",t,n,o):G.inSourceMode()?u.focus():(c.contentWindow.focus(),f&&(m.selectRange(f),f=null)),this},G.keyDown=function(e,t,n){return G.bind("keydown",e,t,n)},G.keyPress=function(e,t,n){return G.bind("keypress",e,t,n)},G.keyUp=function(e,t,n){return G.bind("keyup",e,t,n)},G.nodeChanged=function(e){return G.bind("nodechanged",e,!1,!0)},G.selectionChanged=function(e){return G.bind("selectionchanged",e,!1,!0)},C()},e.sceditor.ie=function(){var e,o=3,i=n.createElement("div"),r=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++o+"]><i></i><![endif]-->";while(r[0]);return n.all&&t.atob&&(o=10),o>4?o:e}(),e.sceditor.isWysiwygSupported=function(){var t,n=e('<div contenteditable="true">')[0].contentEditable,o=n!==void 0&&"inherit"!==n,i=navigator.userAgent;if(!o)return!1;var r=/Opera Mobi|Opera Mini/i.test(i);return/Android/i.test(i)&&(r=!0,/Safari/.test(i)&&(t=/Safari\/(\d+)/.exec(i),r=t&&t[1]?534>t[1]:!0)),/ Silk\//i.test(i)&&(t=/AppleWebKit\/(\d+)/.exec(i),r=t&&t[1]?534>t[1]:!0),/iPhone|iPod|iPad/i.test(i)&&(r=!/OS [5-9](_\d)+ like Mac OS X/i.test(i)),/fennec/i.test(i)&&(r=!1),!r}(),e.sceditor.regexEscape=function(e){return e.replace(/[\$\?\[\]\.\*\(\)\|\\]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")},e.sceditor.escapeEntities=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />"):e},e.sceditor.locale={},e.sceditor.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,n,o){for(var r=t.opts.fonts.split(","),s=e("<div />"),a=function(){return o(e(this).data("font")),t.closeDropDown(!0),!1},l=0;r.length>l;l++)s.append(i("fontOpt",{font:r[l]},!0).click(a));t.createDropDown(n,"font-picker",s)},exec:function(t){var n=this;e.sceditor.command.get("font")._dropDown(n,t,function(e){n.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,n,o){for(var r=e("<div />"),s=function(n){o(e(this).data("size")),t.closeDropDown(!0),n.preventDefault()},a=1;7>=a;a++)r.append(i("sizeOpt",{size:a},!0).click(s));t.createDropDown(n,"fontsize-picker",r)},exec:function(t){var n=this;e.sceditor.command.get("size")._dropDown(n,t,function(e){n.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,n,o){var i,r,s,a,l={r:255,g:255,b:255},c=e("<div />"),d=t.opts.colors?t.opts.colors.split("|"):Array(21),u=[],p=e.sceditor.command.get("color");if(!p._htmlCache){for(i=0;d.length>i;++i){for(a=d[i]?d[i].split(","):Array(21),u.push('<div class="sceditor-color-column">'),r=0;a.length>r;++r)s=a[r]||"#"+l.r.toString(16)+l.g.toString(16)+l.b.toString(16),u.push('<a href="#" class="sceditor-color-option" style="background-color: '+s+'" data-color="'+s+'"></a>'),0===r%5?(l.g-=51,l.b=255):l.b-=51;u.push("</div>"),0===i%5?(l.r-=51,l.g=255,l.b=255):(l.g=255,l.b=255)}p._htmlCache=u.join("")}c.append(p._htmlCache).find("a").click(function(n){o(e(this).attr("data-color")),t.closeDropDown(!0),n.preventDefault()}),t.createDropDown(n,"color-picker",c)},exec:function(t){var n=this;e.sceditor.command.get("color")._dropDown(n,t,function(e){n.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=this,o=i("pastetext",{label:n._("Paste your text inside the following box:"),insert:n._("Insert")},!0);o.find(".button").click(function(e){t=o.find("#txt").val(),t&&n.wysiwygEditorInsertText(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"pastetext",o)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},table:{exec:function(t){var n=this,o=i("table",{rows:n._("Rows:"),cols:n._("Cols:"),insert:n._("Insert")},!0);o.find(".button").click(function(t){var i=o.find("#rows").val()-0,r=o.find("#cols").val()-0,s="<table>";if(!(1>i||1>r)){for(var a=0;i>a;a++){s+="<tr>";for(var l=0;r>l;l++)s+="<td>"+(e.sceditor.ie?"":"<br />")+"</td>";s+="</tr>"}s+="</table>",n.wysiwygEditorInsertHtml(s),n.closeDropDown(!0),t.preventDefault()}}),n.createDropDown(t,"inserttable",o)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(e){var t=this,n=i("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var o=n.find("#image").val(),i=n.find("#width").val(),r=n.find("#height").val(),s="";i&&(s+=' width="'+i+'"'),r&&(s+=' height="'+r+'"'),o&&"http://"!==o&&t.wysiwygEditorInsertHtml("<img"+s+' src="'+o+'" />'),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",n)},tooltip:"Insert an image"},email:{exec:function(e){var t=this,n=i("email",{label:t._("E-mail:"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var o=n.find("#email").val();o&&(t.focus(),t.getRangeHelper().selectedHtml()?t.execCommand("createlink","mailto:"+o):t.wysiwygEditorInsertHtml('<a href="mailto:'+o+'">'+o+"</a>")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertemail",n)},tooltip:"Insert an email"},link:{exec:function(e){var t=this,n=i("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0);n.find(".button").click(function(e){var o=n.find("#link").val(),i=n.find("#des").val();o&&"http://"!==o&&(t.focus(),!t.getRangeHelper().selectedHtml()||i?(i||(i=o),t.wysiwygEditorInsertHtml('<a href="'+o+'">'+i+"</a>")):t.execCommand("createlink",o)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertlink",n)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(e,t,n){var o="<blockquote>",i="</blockquote>";t?(n=n?"<cite>"+n+"</cite>":"",o=o+n+t+i+"<br />",i=null):""===this.getRangeHelper().selectedHtml()&&(i="<br />"+i),this.wysiwygEditorInsertHtml(o,i)},tooltip:"Insert a Quote"},emoticon:{exec:function(t){var n,o=this,i=o.opts.emoticonsCompat?" ":"",r=e("<div />"),s=e("<div />");if(n=function(t,n){s.append(e("<img />").attr({src:e.isPlainObject(n)?n.url:n,alt:t,title:e.isPlainObject(n)?n.tooltip||t:t}).click(function(t){o.insert(e(this).attr("alt")+i),o.closeDropDown(!0),t.preventDefault()})),s.children().length>3&&(r.append(s),s=e("<div />"))},e.each(o.opts.emoticons.dropdown,n),s.children().length>0&&r.append(s),o.opts.emoticons.more){var a=e(this._('<a class="sceditor-more">{0}</a>',this._("More"))).click(function(){var i=e.extend({},o.opts.emoticons.dropdown,o.opts.emoticons.more);return r=e("<div />"),e.each(i,n),s.children().length>0&&r.append(s),o.createDropDown(t,"insertemoticon",r),!1});r.append(a)}o.createDropDown(t,"insertemoticon",r)},txtExec:function(t){e.sceditor.command.get("emoticon").exec.call(this,t)},keyPress:function(t){if(-1!==this.opts.toolbar.indexOf("emoticon")){var n=this,o=0,r=String.fromCharCode(t.which);return n.EmoticonsCache||(n.EmoticonsCache=[],e.each(e.extend({},n.opts.emoticons.more,n.opts.emoticons.dropdown,n.opts.emoticons.hidden),function(e,t){n.EmoticonsCache[o++]=[e,i("emoticon",{key:e,url:t.url||t,tooltip:t.tooltip||e})]}),n.EmoticonsCache.sort(function(e,t){return e[0].length-t[0].length})),n.longestEmoticonCode||(n.longestEmoticonCode=n.EmoticonsCache[n.EmoticonsCache.length-1][0].length),n.getRangeHelper().raplaceKeyword(n.EmoticonsCache,!0,!0,n.longestEmoticonCode,n.opts.emoticonsCompat,r)?/^\s$/.test(r)&&n.opts.emoticonsCompat?!0:(t.preventDefault(),t.stopPropagation(),!1):void 0}},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var o,r=i("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0);r.find(".button").click(function(t){var i=r.find("#link").val().replace("http://","");""!==i&&(o=i.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),o&&(i=o[1]),/^[a-zA-Z0-9_\-]{11}$/.test(i)?n(i):alert("Invalid YouTube video")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",r)},exec:function(t){var n=this;e.sceditor.command.get("youtube")._dropDown(n,t,function(e){n.wysiwygEditorInsertHtml(i("youtube",{id:e}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1,i=t.getDate();return 2e3>n&&(n=1900+n),10>o&&(o="0"+o),10>i&&(i="0"+i),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,i)},exec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},txtExec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>o&&(o="0"+o),t+":"+n+":"+o},exec:function(){this.insertText(e.sceditor.command.get("time")._time())},txtExec:function(){this.insertText(e.sceditor.command.get("time")._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),o=e(n);t.focus(),(n&&!o.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),o=e(n),n&&!o.is("body")))&&("ltr"===o.css("direction")?o.css("direction",""):o.css("direction","ltr"))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),o=e(n);t.focus(),(n&&!o.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),o=e(n),n&&!o.is("body")))&&("rtl"===o.css("direction")?o.css("direction",""):o.css("direction","rtl"))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},source:{exec:function(){this.toggleSourceMode(),this.blur()},txtExec:function(){this.toggleSourceMode(),this.blur()},tooltip:"View source"},ignore:{}},e.sceditor.rangeHelper=function(t,n){var o,i,r,s,a,l,c=!0,d="sceditor-start-marker",u="sceditor-end-marker",p="character",f=this;r=function(e,t){i=t||e.contentDocument||e.document,o=e,c=!!e.getSelection}(t,n),f.insertHTML=function(e,t){var n,o,r=f.selectedRange();if(t&&(e+=f.selectedHtml()+t),c){for(o=i.createElement("div"),n=i.createDocumentFragment(),o.innerHTML=e;o.firstChild;)n.appendChild(o.firstChild);f.insertNode(n)}else{if(!r)return!1;r.pasteHTML(e)}},f.insertNode=function(e,t){if(c){var n,o,r=i.createDocumentFragment(),s=f.selectedRange();if(!s)return!1;r.appendChild(e),t&&(r.appendChild(s.extractContents()),r.appendChild(t)),o=r.lastChild,s.deleteContents(),s.insertNode(r),n=i.createRange(),n.setStartAfter(o),f.selectRange(n)}else f.insertHTML(e.outerHTML,t?t.outerHTML:null)},f.cloneSelected=function(){var e=f.selectedRange();return e?c?e.cloneRange():e.duplicate():void 0},f.selectedRange=function(){var e,t,n=c?o.getSelection():i.selection;if(n&&(n.getRangeAt&&0>=n.rangeCount&&(e=i.createRange(),e.setStart(i.body,0),n.addRange(e)),e=c?n.getRangeAt(0):n.createRange(),!e.parentElement||!(t=e.parentElement())||t.ownerDocument===i))return e},f.selectedHtml=function(){var e,t=f.selectedRange();return t?!c&&""!==t.text&&t.htmlText?t.htmlText:c?(e=i.createElement("div"),e.appendChild(t.cloneContents()),e.innerHTML):"":""},f.parentNode=function(){var e=f.selectedRange();if(e){if(c)return e.commonAncestorContainer;if(e.parentElement)return e.parentElement()}},f.getFirstBlockParent=function(t){var n=function(t){if(!e.sceditor.dom.isInline(t))return t;var o=t?t.parentNode:null;return o?n(o):null};return n(t||f.parentNode())},f.insertNodeAt=function(e,t){var n=f.cloneSelected();return n?(n.collapse(e),n.insertNode?n.insertNode(t):n.pasteHTML(t.outerHTML),void 0):!1},s=function(e){f.removeMarker(e);var t=i.createElement("span");return t.id=e,t.style.lineHeight="0",t.style.display="none",t.className="sceditor-selection",t},f.insertMarkers=function(){f.insertNodeAt(!0,s(d)),f.insertNodeAt(!1,s(u))},f.getMarker=function(e){return i.getElementById(e)},f.removeMarker=function(e){var t=f.getMarker(e);t&&t.parentNode.removeChild(t)},f.removeMarkers=function(){f.removeMarker(d),f.removeMarker(u)},f.saveRange=function(){f.insertMarkers()},f.selectRange=function(e){c?(o.getSelection().removeAllRanges(),o.getSelection().addRange(e)):e.select()},f.restoreRange=function(){var e,t=f.selectedRange(),n=f.getMarker(d),o=f.getMarker(u);return n&&o&&t?(c?(t=i.createRange(),t.setStartBefore(n),t.setEndAfter(o),f.selectRange(t)):(t=i.body.createTextRange(),e=i.body.createTextRange(),e.moveToElementText(n),t.setEndPoint("StartToStart",e),t.moveStart(p,0),e.moveToElementText(o),t.setEndPoint("EndToStart",e),t.moveEnd(p,0),f.selectRange(t)),f.removeMarkers(),void 0):!1},l=function(e,t){var n=f.cloneSelected();return n?(n.collapse(!1),c?(n.setStart(n.startContainer,n.startOffset-e),n.setEnd(n.endContainer,n.endOffset+t)):(n.moveStart(p,0-e),n.moveEnd(p,t)),f.selectRange(n),void 0):!1},a=function(e,t){var n="",o=f.cloneSelected();return o?(o.collapse(!1),e?c?(n=o.startContainer.textContent.substr(0,o.startOffset),n=n.substr(Math.max(0,n.length-t))):(o.moveStart(p,0-t),n=o.text):c?n=o.startContainer.textContent.substr(o.startOffset,t):(o.moveEnd(p,t),n=o.text),n):""},f.raplaceKeyword=function(t,n,o,i,r,s){o||t.sort(function(e,t){return e.length-t.length});var d,u,p,h,m,g,b,v,y=i||t[t.length-1][0].length;
if(d=u=p="",r){if(!c)return!1;++y}for(d=a(!0,y),n&&(u=a(!1,y)),p=d+(null!=s?s:"")+u,h=t.length;h--;)if(b=RegExp("(?:[\\s    ])"+e.sceditor.regexEscape(t[h][0])+"(?=[\\s    ])"),v=d.length-1-t[h][0].length,r&&--v,v=Math.max(0,v),!r&&(m=p.indexOf(t[h][0],v))>-1||r&&(m=p.substr(v).search(b))>-1){if(r&&(m+=v+1),m>d.length||m+t[h][0].length+(r?1:0)<d.length)continue;return g=d.length-m,l(g,t[h][0].length-g-(null!=s&&/^\S/.test(s)?1:0)),f.insertHTML(t[h][1]),!0}return!1},f.compare=function(e,t){return t||(t=f.selectedRange()),e&&t?c?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):0===e.compareEndPoints("EndToEnd",t)&&0===e.compareEndPoints("StartToStart",t):!e&&!t}},e.sceditor.dom={traverse:function(e,t,n,o,i){if(e)for(e=i?e.lastChild:e.firstChild;null!=e;){var r=i?e.previousSibling:e.nextSibling;if(!n&&t(e)===!1)return!1;if(!o&&this.traverse(e,t,n,o,i)===!1)return!1;if(n&&t(e)===!1)return!1;e=r}},rTraverse:function(e,t,n,o){this.traverse(e,t,n,o,!0)},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",isInline:function(t,n){return t&&1===t.nodeType?(t=t.tagName.toLowerCase(),"code"===t?!n:0>e.sceditor.dom.blockLevelList.indexOf("|"+t+"|")):!0},copyCSS:function(e,t){t.style.cssText=e.style.cssText+t.style.cssText},fixNesting:function(e){var t=this,n=function(e){for(;t.isInline(e.parentNode,!0);)e=e.parentNode;return e};t.traverse(e,function(e){if(1===e.nodeType&&!t.isInline(e,!0)&&t.isInline(e.parentNode,!0)){var o=n(e),i=o.parentNode,r=t.extractContents(o,e),s=e;t.copyCSS(o,s),i.insertBefore(r,o),i.insertBefore(s,o)}})},findCommonAncestor:function(t,n){return e(t).parents().has(e(n)).first()},removeWhiteSpace:function(t){var n,o=/[^\S|\u00A0]+/g;this.traverse(t,function(t){if(n=t.nodeValue,3===t.nodeType&&0===e(t).parents("code, pre").length&&n){if(n=n.replace(/[\r\n]/,""),!n.length)return t.parentNode.removeChild(t),void 0;/\S|\u00A0/.test(n)?o.test(n)&&(t.nodeValue=n.replace(o," ")):t.nodeValue=" "}})},extractContents:function(e,t){var n=this,o=n.findCommonAncestor(e,t),i=o?o.get(0):null,r=!1,s=!1;return function a(o){var i=e.ownerDocument.createDocumentFragment();return n.traverse(o,function(n){if(s||n===t&&r)return s=!0,!1;n===e&&(r=!0);var o,l;r?jQuery.contains(n,t)&&1===n.nodeType?(o=a(n),l=n.cloneNode(!1),l.appendChild(o),i.appendChild(l)):i.appendChild(n):jQuery.contains(n,e)&&1===n.nodeType&&(o=a(n),l=n.cloneNode(!1),l.appendChild(o),i.appendChild(l))},!1),i}(i)}},e.sceditor.plugins={},e.sceditor.PluginManager=function(t){var n=this,o=[],i=t,r=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},s=function(e,t){e=[].slice.call(e);for(var n=o.length,s=r(e.shift());n--;)if(s in o[n]){if(t)return o[n][s].apply(i,e);o[n][s].apply(i,e)}};n.call=function(){s(arguments,!1)},n.callOnlyFirst=function(){return s(arguments,!0)},n.iter=function(e){return e=r(e),function(){var t=o.length;return{callNext:function(n){for(;t--;)if(o[t]&&e in o[t])return o[t].apply(i,n)},hasNext:function(){for(var n=t;n--;)if(o[n]&&e in o[n])return!0;return!1}}}()},n.hasHandler=function(e){var t=o.length;for(e=r(e);t--;)if(e in o[t])return!0;return!1},n.exsists=function(t){return t in e.sceditor.plugins?(t=e.sceditor.plugins[t],"function"==typeof t&&"object"==typeof t.prototype):!1},n.isRegistered=function(t){var i=o.length;if(!n.exsists(t))return!1;for(;i--;)if(o[i]instanceof e.sceditor.plugins[t])return!0;return!1},n.register=function(t){return n.exsists(t)?(t=new e.sceditor.plugins[t],o.push(t),"init"in t&&t.init.apply(i),!0):!1},n.deregister=function(t){var r,s=o.length,a=!1;if(!n.isRegistered(t))return!1;for(;s--;)o[s]instanceof e.sceditor.plugins[t]&&(r=o.splice(s,1)[0],a=!0,"destroy"in r&&r.destroy.apply(i));return a},n.destroy=function(){for(var e=o.length;e--;)"destroy"in o[e]&&o[e].destroy.apply(i);o=null,i=null}},e.sceditor.command={get:function(t){return e.sceditor.commands[t]||null},set:function(t,n){return t&&n?(n=e.extend(e.sceditor.commands[t]||{},n),n.remove=function(){e.sceditor.command.remove(t)},e.sceditor.commands[t]=n,this):!1},remove:function(t){return e.sceditor.commands[t]&&delete e.sceditor.commands[t],this}},e.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,source",style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",charset:"utf-8",emoticonsCompat:!1,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autoExpand:!1,autoUpdate:!1,runWithoutWysiwygSupport:!1,id:null,plugins:"",zIndex:null,parserOptions:{},dropDownCss:{}},e.fn.sceditor=function(t){var n,o=[];return t=t||{},t.runWithoutWysiwygSupport||e.sceditor.isWysiwygSupported?(this.each(function(){n=this.jquery?this:e(this),n.parents(".sceditor-container").length>0||("state"===t?o.push(!!n.data("sceditor")):"instance"===t?o.push(n.data("sceditor")):n.data("sceditor")||new e.sceditor(this,t))}),o.length?1===o.length?o[0]:e(o):this):void 0}})(jQuery,window,document),function(e,t,n){"use strict";e.sceditor.BBCodeParser=function(t){if(!(this instanceof e.sceditor.BBCodeParser))return new e.sceditor.BBCodeParser(t);var o,i,r,s,a,l,c,d,u,p,f,h,m,g,b,v=this,y={open:"open",content:"content",newline:"newline",close:"close"};Object.freeze&&Object.freeze(y);var x=function(e,t,n,o,i,r){var s=this;s.type=e,s.name=t,s.val=n,s.attrs=o||{},s.children=i||[],s.closing=r||null};x.prototype={clone:function(e){var t=this;return new x(t.type,t.name,t.val,t.attrs,e?t.children:[],t.closing?t.closing.clone():null)},splitAt:function(t){var n,o=this,i=0,r=o.children.length;if("number"!=typeof object&&(t=e.inArray(t,o.children)),0>t||t>r)return null;for(;r--;)r>=t?i++:r=!1;return n=o.clone(),n.children=o.children.splice(t,i),n}},o=function(){v.opts=e.extend({},e.sceditor.BBCodeParser.defaults,t),v.bbcodes=e.sceditorBBCodePlugin.bbcodes},v.tokenize=function(e){var t,n,o,r=[],s=[{type:"close",regex:/^\[\/[^\[\]]+\]/},{type:"open",regex:/^\[[^\[\]]+\]/},{type:"newline",regex:/^(\r\n|\r|\n)/},{type:"content",regex:/^([^\[\r\n]+|\[)/}];s.reverse();e:for(;e.length;){for(o=s.length;o--;)if(n=s[o].type,(t=e.match(s[o].regex))&&t[0]){r.push(i(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(i(y.content,e)),e=""}return r},i=function(t,n){var o,i,s;return"open"===t?(o=n.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/),s=g(o[1]),o[2]&&(o[2]=e.trim(o[2]))&&(i=r(o[2]))):"close"===t?(o=n.match(/\[\/([^\[\]]+)\]/),s=g(o[1])):s="newline"===t?"#newline":"#",new x(t,s,n,i)},r=function(t){var n,o,i=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,r={};if(o=function(e,t){return t&&(e=e.replace("\\\\","\\").replace("\\"+t,t)),e},"="===t.charAt(0)&&2>=t.split("=").length)r.defaultattr=e.sceditorBBCodePlugin.stripQuotes(t.substr(1));else for("="===t.charAt(0)&&(t="defaultattr"+t);n=i.exec(t);)r[g(n[1])]=o(n[3],n[2])||n[4];return r},v.parse=function(e,t){var n=s(v.tokenize(e));return v.opts.fixInvalidChildren&&u(n),v.opts.removeEmptyTags&&d(n),v.opts.fixInvalidNesting&&l(n),a(n,null,t),v.opts.removeEmptyTags&&d(n),n},h=function(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return!0;return!1},c=function(t,n){var o=t?v.bbcodes[t.name]:null,i=o?o.allowedChildren:null;return v.opts.fixInvalidChildren&&i?i&&0>e.inArray(n.name||"#",i)?!1:!0:!0},s=function(t){for(var n,o,i,r,s,a,l,c=[],d=[],u=[],p=function(){return b(u)},f=function(e){p()?p().children.push(e):d.push(e)},m=function(t){return p()&&(o=v.bbcodes[p().name])&&o.closedBy&&e.inArray(t,o.closedBy)>-1};n=t.shift();){switch(l=t[0],n.type){case y.open:m(n.name)&&u.pop(),f(n),o=v.bbcodes[n.name],o&&o.isSelfClosing||!o&&!h(n.name,y.close,t)||u.push(n);break;case y.close:if(p()&&n.name!==p().name&&m("/"+n.name)&&u.pop(),p()&&n.name===p().name)p().closing=n,u.pop();else if(h(n.name,y.open,u)){for(;i=u.pop();){if(i.name===n.name){i.closing=n;break}r=i.clone(),c.length>1&&r.children.push(b(c)),c.push(r)}for(f(b(c)),s=c.length;s--;)u.push(c[s]);c.length=0}else n.type=y.content,f(n);break;case y.newline:p()&&l&&m((l.type===y.close?"/":"")+l.name)&&(l.type!==y.close||l.name!==p().name)&&(o=v.bbcodes[p().name],o&&o.breakAfter?u.pop():o&&o.isInline===!1&&v.opts.breakAfterBlock&&o.breakAfter!==!1&&u.pop()),f(n);break;default:f(n)}a=n}return d},a=function(e,t,n){var o,i,r,s,l,c,d,u,p,f=e.length,h=f;for(t&&(s=v.bbcodes[t.name]);h--;)if(o=e[h])if(o.type===y.newline){if(i=h>0?e[h-1]:null,r=f-1>h?e[h+1]:null,p=!1,!n&&s&&s.isSelfClosing!==!0&&(0===h?(s.isInline===!1&&v.opts.breakStartBlock&&s.breakStart!==!1&&(p=!0),s.breakStart&&(p=!0)):d||f-1!==h||(s.isInline===!1&&v.opts.breakEndBlock&&s.breakEnd!==!1&&(p=!0),s.breakEnd&&(p=!0),d=p)),i&&i.type===y.open&&(l=v.bbcodes[i.name])&&(n?l.isInline===!1&&(p=!0):(l.isInline===!1&&v.opts.breakAfterBlock&&l.breakAfter!==!1&&(p=!0),l.breakAfter&&(p=!0))),!n&&!u&&r&&r.type===y.open&&(c=v.bbcodes[r.name])&&(c.isInline===!1&&v.opts.breakBeforeBlock&&c.breakBefore!==!1&&(p=!0),c.breakBefore&&(p=!0),u=p,p)){e.splice(h,1);continue}p&&e.splice(h,1),u=!1}else o.type===y.open&&a(o.children,o,n)},l=function(t,n,o,i){var r,s,a,c,d,u,p=function(e){var t=v.bbcodes[e.name];return!t||t.isInline!==!1};for(n=n||[],i=i||t,s=0;t.length>s;s++)if((r=t[s])&&r.type===y.open){if(!p(r)&&o&&(a=b(n),u=a.splitAt(r),d=n.length>1?n[n.length-2].children:i,(c=e.inArray(a,d))>-1))return u.children.splice(e.inArray(r,u.children),1),d.splice(c+1,0,r,u),void 0;n.push(r),l(r.children,n,o||p(r),i),n.pop(r)}},u=function(e,t){for(var n,o,i=e.length;i--;)(n=e[i])&&(c(t,n)||(n.name=null,n.type=y.content,c(t,n)?(o=[i+1,0].concat(n.children),n.closing&&(n.closing.name=null,n.closing.type=y.content,o.push(n.closing)),i+=o.length-1,Array.prototype.splice.apply(e,o)):t.children.splice(i,1)),n.type===y.open&&u(n.children,n))},d=function(e){for(var t,n,o=e.length;o--;)(t=e[o])&&t.type===y.open&&(n=v.bbcodes[t.name],d(t.children),1>t.children.length&&n&&!n.isSelfClosing&&!n.allowsEmpty&&e.splice(o,1))},v.toHTML=function(e,t){return p(v.parse(e,t),!0)},p=function(t,o){for(var i,r,s,a,l,c,d,u,f=[];t.length>0;)if(i=t.shift()){if(i.type===y.open)r=v.bbcodes[i.name],d=!r||(r.isHtmlInline!==void 0?r.isHtmlInline:r.isInline),l=o&&(!r||d!==!1),s=p(i.children,!1),r&&r.html?(u=d===!1&&!r.isPreFormatted&&!r.skipLastLineBreak,u&&!e.sceditor.ie&&(s+="<br />"),a=e.isFunction(r.html)?r.html.call(v,i,i.attrs,s):e.sceditorBBCodePlugin.formatString(r.html,s)):a=i.val+s+(i.closing?i.closing.val:"");else{if(i.type===y.newline){if(!o){f.push("<br />");continue}if(c){f.push("</div>\n"),c=!1;continue}f.push("<div>"),e.sceditor.ie||f.push("<br />"),(n.documentMode&&8>n.documentMode||8>e.sceditor.ie)&&f.push(" "),f.push("</div>\n");continue}l=o,a=e.sceditor.escapeEntities(i.val)}l&&!c?(f.push("<div>"),c=!0):!l&&c&&(f.push("</div>\n"),c=!1),f.push(a)}return c&&f.push("</div>\n"),f.join("")},v.toBBCode=function(e,t){return f(v.parse(e,t))},f=function(t){for(var n,o,i,r,s,a,l,c,d,u,p=[];t.length>0;)if(n=t.shift())if(i=v.bbcodes[n.name],r=!(!i||i.isInline!==!1),s=i&&i.isSelfClosing,l=r&&v.opts.breakBeforeBlock&&i.breakBefore!==!1||i&&i.breakBefore,c=r&&!s&&v.opts.breakStartBlock&&i.breakStart!==!1||i&&i.breakStart,d=r&&v.opts.breakEndBlock&&i.breakEnd!==!1||i&&i.breakEnd,u=r&&v.opts.breakAfterBlock&&i.breakAfter!==!1||i&&i.breakAfter,a=(i?i.quoteType:null)||v.opts.quoteType||e.sceditor.BBCodeParser.QuoteType.auto,i||n.type!==y.open)if(n.type===y.open){if(l&&p.push("\n"),p.push("["+n.name),n.attrs){n.attrs.defaultattr&&(p.push("="+m(n.attrs.defaultattr,a)),delete n.attrs.defaultattr);for(o in n.attrs)n.attrs.hasOwnProperty(o)&&p.push(" "+o+"="+m(n.attrs[o],a))}p.push("]"),c&&p.push("\n"),n.children&&p.push(f(n.children)),s||i.excludeClosing||(d&&p.push("\n"),p.push("[/"+n.name+"]")),u&&p.push("\n"),n.closing&&s&&p.push(n.closing.val)}else p.push(n.val);else p.push(n.val),n.children&&p.push(f(n.children)),n.closing&&p.push(n.closing.val);return p.join("")},m=function(t,n){var o=e.sceditor.BBCodeParser.QuoteType,i=/\s|=/.test(t);return e.isFunction(n)?n(t):n===o.never||n===o.auto&&!i?t:'"'+t.replace("\\","\\\\").replace('"','\\"')+'"'},b=function(e){return e.length?e[e.length-1]:null},g=function(e){return e.toLowerCase()},o()},e.sceditor.BBCodeParser.QuoteType={always:1,never:2,auto:3},Object.freeze&&Object.freeze(e.sceditor.BBCodeParser.QuoteType),e.sceditor.BBCodeParser.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:e.sceditor.BBCodeParser.QuoteType.auto},e.sceditorBBCodePlugin=e.sceditor.plugins.bbcode=function(){var t,o,i,r,s,a,l,c,d=this;r=e.sceditorBBCodePlugin.formatString,d.bbcodes=e.sceditorBBCodePlugin.bbcodes,d.stripQuotes=e.sceditorBBCodePlugin.stripQuotes;var u={},p={},f={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]},h={};d.init=function(){d.opts=this.opts,t(),l(this)},l=function(t){var n={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(t){var n=this;e.sceditor.command.get("font")._dropDown(n,t,function(e){n.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(t){var n=this;e.sceditor.command.get("size")._dropDown(n,t,function(e){n.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(t){var n=this;e.sceditor.command.get("color")._dropDown(n,t,function(e){n.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:["[ul][li]","[/li][/ul]"]},orderedlist:{txtExec:["[ol][li]","[/li][/ol]"]},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var n=prompt(this._("Enter the image URL:"),t);n&&this.insertText("[img]"+n+"[/img]")}},email:{txtExec:function(e,t){var n=t&&t.indexOf("@")>-1?null:t,o=prompt(this._("Enter the e-mail address:"),n?"":t),i=prompt(this._("Enter the displayed text:"),n||o)||o;o&&this.insertText("[email="+o+"]"+i+"[/email]")}},link:{txtExec:function(e,t){var n=t&&t.indexOf("http://")>-1?null:t,o=prompt(this._("Enter URL:"),n?"http://":t),i=prompt(this._("Enter the displayed text:"),n||o)||o;o&&this.insertText("[url="+o+"]"+i+"[/url]")}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(t){var n=this;e.sceditor.command.get("youtube")._dropDown(n,t,function(e){n.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}};t.commands=e.extend(!0,{},n,t.commands)},t=function(){e.each(d.bbcodes,function(t){d.bbcodes[t].tags!==void 0&&e.each(d.bbcodes[t].tags,function(e,n){var o=d.bbcodes[t].isInline===!1;u[e]=u[e]||{},u[e][o]=u[e][o]||{},u[e][o][t]=n}),d.bbcodes[t].styles!==void 0&&e.each(d.bbcodes[t].styles,function(e,n){var o=d.bbcodes[t].isInline===!1;p[o]=p[o]||{},p[o][e]=p[o][e]||{},p[o][e][t]=n})})},s=function(t,n){var o,i,r,s,a,l=t.style;return l?(h[n]||(h[n]=e.camelCase(n)),a=h[n],"text-align"===n?(o=e(t),r=l.direction,s=l[a]||o.css(n),o.parent().css(n)===s||"block"!==o.css("display")||o.is("hr")||o.is("th")||(i=s),r&&i&&(/right/i.test(i)&&"rtl"===r||/left/i.test(i)&&"ltr"===r)?null:i):l[a]):null},a=function(e){var t=e.childNodes,n=t.length;if(e.nodeValue&&/\S|\u00A0/.test(e.nodeValue))return!1;if(0===t.length||1===t.length&&(/br/i.test(t[0].nodeName)||a(t[0])))return!0;for(;n--;)if(!a(t[n]))return!1;return!0},o=function(t,n,o){var i;return o=!!o,p[o]?(e.each(p[o],function(o,l){i=s(t[0],o),i&&s(t.parent()[0],o)!==i&&e.each(l,function(o,s){(/\S|\u00A0/.test(n)||d.bbcodes[o].allowsEmpty||!a(t[0]))&&(!s||e.inArray(""+i,s)>-1)&&(n=e.isFunction(d.bbcodes[o].format)?d.bbcodes[o].format.call(d,t,n):r(d.bbcodes[o].format,n))})}),n):n},i=function(t,n,o){var i=t[0].nodeName.toLowerCase();if(o=!!o,u[i]&&u[i][o]&&e.each(u[i][o],function(o,i){if(/\S|\u00A0/.test(n)||d.bbcodes[o].allowsEmpty||!a(t[0])){if(i){var s=!1;if(e.each(i,function(n,o){return!t.attr(n)||o&&0>e.inArray(t.attr(n),o)?void 0:(s=!0,!1)}),!s)return}n=e.isFunction(d.bbcodes[o].format)?d.bbcodes[o].format.call(d,t,n):r(d.bbcodes[o].format,n)}}),o&&(!e.sceditor.dom.isInline(t[0],!0)||"br"===i)){var s=t[0].parentNode,l=t[0].previousSibling,c=e.sceditor.dom.isInline(s,!0)||"body"===s.nodeName.toLowerCase();(c||"li"===i||s.lastChild!==t[0]||"br"===i&&e.sceditor.ie)&&(n+="\n"),"br"!==i&&!c&&l&&3===l.nodeType&&(n="\n"+n)}return n},d.signalToSource=function(t,n){var o=new e.sceditor.BBCodeParser(d.opts.parserOptions);return e.sceditor.dom.removeWhiteSpace(n[0]),e.trim(o.toBBCode(d.elementToBbcode(n),!0))},d.elementToBbcode=function(t){return function n(t,r){var s="";return e.sceditor.dom.traverse(t,function(t){var a=e(t),l="",c=t.nodeName.toLowerCase(),d=f[c],u=!0;if("object"==typeof r&&(u=e.inArray(c,r)>-1,u||(d=r)),3!==t.nodeType){if(a.hasClass("sceditor-ignore"))return;"iframe"!==c&&(l=n(t,d)),u?("code"!==c&&(l=o(a,l),l=i(a,l),l=o(a,l,!0)),s+=i(a,l,!0)):s+=l}else!t.wholeText||t.previousSibling&&3===t.previousSibling.nodeType?t.wholeText||(s+=t.nodeValue):s+=0===a.parents("code").length?t.wholeText.replace(/ +/g," "):t.wholeText},!1,!0),s}(t.get(0))},d.signalToWysiwyg=function(t,n){var o=new e.sceditor.BBCodeParser(d.opts.parserOptions),i=o.toHTML(t);return n?c(i):i},c=function(t){var o,i,r=e("<div />").hide().appendTo(n.body),s=r[0],a=function(t){for(;i=t.firstChild;)s.insertBefore(i,t);e.sceditor.ie>=9&&s.insertBefore(n.createElement("br"),t),s.removeChild(t)};return s.innerHTML=t.replace(/<\/div>\n/g,"</div>"),o=s.firstChild,o&&"div"===o.nodeName.toLowerCase()&&a(o),o=s.lastChild,o&&"div"===o.nodeName.toLowerCase()&&a(o),s=s.innerHTML,r.remove(),s}},e.sceditorBBCodePlugin.stripQuotes=function(e){return e.replace(/^(["'])(.*?)\1$/,"$2")},e.sceditorBBCodePlugin.formatString=function(){var e=arguments;return e[0].replace(/\{(\d+)\}/g,function(t,n){return e[n-0+1]!==void 0?e[n-0+1]:"{"+n+"}"})},e.sceditorBBCodePlugin.normaliseColour=function(e){function t(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16),2>e.length?"0"+e:e)}var n;return(n=e.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+t(n[1])+t(n[2]-0)+t(n[3]-0):(n=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]:e},e.sceditorBBCodePlugin.bbcodes={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n;return"font"===e[0].nodeName.toLowerCase()&&(n=e.attr("face"))||(n=e.css("font-family")),"[font="+this.stripQuotes(n)+"]"+t+"[/font]"},html:function(e,t,n){return'<font face="'+t.defaultattr+'">'+n+"</font>"}},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=e.attr("size"),o=1;return n||(n=e.css("fontSize")),n.indexOf("px")>-1?(n=n.replace("px","")-0,n>12&&(o=2),n>15&&(o=3),n>17&&(o=4),n>23&&(o=5),n>31&&(o=6),n>47&&(o=7)):o=n,"[size="+o+"]"+t+"[/size]"},html:function(e,t,n){return'<font size="'+t.defaultattr+'">'+n+"</font>"}},color:{tags:{font:{color:null}},styles:{color:null},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(t,n){var o,i=t[0];return"font"===i.nodeName.toLowerCase()&&(o=t.attr("color"))||(o=i.style.color||t.css("color")),"[color="+e.sceditorBBCodePlugin.normaliseColour(o)+"]"+n+"[/color]"},html:function(e,t,n){return'<font color="'+t.defaultattr+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return e.attr("data-sceditor-emoticon")+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(t,n){var o="",i=function(e){return t.style?t.style[e]:null};return t.attr("data-sceditor-emoticon")!==void 0?n:((t.attr("width")||t.attr("height")||i("width")||i("height"))&&(o="="+e(t).width()+"x"+e(t).height()),"[img"+o+"]"+t.attr("src")+"[/img]")},html:function(e,t,n){var o,i="";return t.width!==void 0&&(i+=' width="'+t.width+'"'),t.height!==void 0&&(i+=' height="'+t.height+'"'),t.defaultattr!==void 0&&(o=t.defaultattr.split(/x/i),i=' width="'+o[0]+'"'+' height="'+(2===o.length?o[1]:o[0])+'"'),"<img"+i+' src="'+n+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n=e.attr("href");return"mailto:"===n.substr(0,7)?'[email="'+n.substr(7)+'"]'+t+"[/email]":"[url="+decodeURI(n)+"]"+t+"[/url]"},html:function(e,t,n){return(t.defaultattr===void 0||0===t.defaultattr.length)&&(t.defaultattr=n),'<a href="'+encodeURI(t.defaultattr)+'">'+n+"</a>"}},email:{quoteType:e.sceditor.BBCodeParser.QuoteType.never,html:function(e,t,n){return t.defaultattr===void 0&&(t.defaultattr=n),'<a href="mailto:'+t.defaultattr+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(t,n){var o="",i=e(t),r=i.children("cite").first();return(1===r.length||i.data("author"))&&(o=r.text()||i.data("author"),i.data("author",o),r.remove(),i.children("cite").replaceWith(function(){return e(this).text()}),n=this.elementToBbcode(e(t)),o="="+o),"[quote"+o+"]"+n+"[/quote]"},html:function(e,t,n){return t.defaultattr!==void 0&&(n="<cite>"+t.defaultattr+"</cite>"+n),"<blockquote>"+n+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return(e=e.attr("data-youtube-id"))?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}},e.sceditorBBCodePlugin.bbcode={get:function(t){return e.sceditorBBCodePlugin.bbcodes[t]||null},set:function(t,n){return t&&n?(n=e.extend(e.sceditorBBCodePlugin.bbcodes[t]||{},n),n.remove=function(){e.sceditorBBCodePlugin.bbcode.remove(t)},e.sceditorBBCodePlugin.bbcodes[t]=n,this):!1},rename:function(e,t){return this.hasOwnProperty(e)?(this[t]=this[e],this.remove(e),this):!1},remove:function(t){return e.sceditorBBCodePlugin.bbcodes[t]&&delete e.sceditorBBCodePlugin.bbcodes[t],this}},e.fn.sceditorBBCodePlugin=function(t){return t=t||{},e.isPlainObject(t)&&(t.plugins=(t.plugins?t.plugins:"")+"bbcode"),this.sceditor(t)}}(jQuery,window,document);